<!DOCTYPE html>
<html lang="en">
<head>
  <!-- ¬© 2026 Subramaniyam Pooni | CS¬≤B Technologies (CSSQUAREDB Technologies) | All Rights Reserved -->
  <meta charset="UTF-8">
  <meta name="author" content="Subramaniyam Pooni">
  <meta name="company" content="CS¬≤B Technologies (CSSQUAREDB Technologies)">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Infrastructure Patterns Part 1 ‚Äî Visual Reference</title>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { background: #030712; min-height: 100vh; font-family: 'Inter', system-ui, sans-serif; }
    ::-webkit-scrollbar { width: 8px; }
    ::-webkit-scrollbar-track { background: #0f172a; }
    ::-webkit-scrollbar-thumb { background: #334155; border-radius: 4px; }
    @keyframes flowDash { to { stroke-dashoffset: -20; } }
    @keyframes pulse { 0%, 100% { opacity: 0.4; } 50% { opacity: 0.8; } }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    .flow-line { animation: flowDash 1s linear infinite; }
    .pulse-bg { animation: pulse 3s ease-in-out infinite; }
    .gradient-text { background: linear-gradient(135deg, #f472b6, #fb923c, #facc15); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
    .glass { background: rgba(15, 23, 42, 0.6); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.1); }
    .tooltip { position: fixed; z-index: 100; padding: 12px 16px; background: rgba(15, 23, 42, 0.95); border: 1px solid rgba(244, 114, 182, 0.5); border-radius: 12px; font-size: 13px; color: #e2e8f0; max-width: 320px; pointer-events: none; animation: fadeIn 0.2s ease-out; }
  </style>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState } = React;
    const Tooltip = ({ text, x, y }) => { if (!text) return null; return <div className="tooltip" style={{ left: Math.min(x, window.innerWidth - 340), top: y + 15 }}>{text}</div>; };
    const GradientDefs = () => (<defs>
      <linearGradient id="pinkGrad" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stopColor="#f472b6" /><stop offset="100%" stopColor="#db2777" /></linearGradient>
      <linearGradient id="orangeGrad" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stopColor="#fb923c" /><stop offset="100%" stopColor="#ea580c" /></linearGradient>
      <linearGradient id="yellowGrad" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stopColor="#facc15" /><stop offset="100%" stopColor="#ca8a04" /></linearGradient>
      <linearGradient id="cyanGrad" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stopColor="#22d3ee" /><stop offset="100%" stopColor="#0891b2" /></linearGradient>
      <linearGradient id="greenGrad" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stopColor="#4ade80" /><stop offset="100%" stopColor="#16a34a" /></linearGradient>
      <linearGradient id="purpleGrad" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stopColor="#a78bfa" /><stop offset="100%" stopColor="#7c3aed" /></linearGradient>
      <linearGradient id="blueGrad" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stopColor="#60a5fa" /><stop offset="100%" stopColor="#2563eb" /></linearGradient>
      <linearGradient id="emeraldGrad" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stopColor="#34d399" /><stop offset="100%" stopColor="#059669" /></linearGradient>
      <linearGradient id="slateGrad" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stopColor="#64748b" /><stop offset="100%" stopColor="#475569" /></linearGradient>
      <linearGradient id="redGrad" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stopColor="#f87171" /><stop offset="100%" stopColor="#dc2626" /></linearGradient>
      <marker id="arrowPink" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><path d="M0,0 L0,6 L9,3 z" fill="#f472b6" /></marker>
      <marker id="arrowOrange" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><path d="M0,0 L0,6 L9,3 z" fill="#fb923c" /></marker>
      <marker id="arrowYellow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><path d="M0,0 L0,6 L9,3 z" fill="#facc15" /></marker>
      <marker id="arrowCyan" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><path d="M0,0 L0,6 L9,3 z" fill="#22d3ee" /></marker>
      <marker id="arrowGreen" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><path d="M0,0 L0,6 L9,3 z" fill="#4ade80" /></marker>
      <marker id="arrowPurple" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><path d="M0,0 L0,6 L9,3 z" fill="#a78bfa" /></marker>
    </defs>);

    // Pattern 47: Semantic Caching
    const SemanticCachingDiagram = ({ onHover }) => (<svg viewBox="0 0 700 200" className="w-full h-auto"><GradientDefs />
      <g transform="translate(30, 70)"><rect width="80" height="60" rx="8" fill="url(#blueGrad)" opacity="0.9" /><text x="40" y="22" textAnchor="middle" fill="white" fontSize="9" fontWeight="bold">Query</text><text x="40" y="40" textAnchor="middle" fill="white" fontSize="7">"What is ML?"</text></g>
      <path d="M115 100 L155 100" stroke="#f472b6" strokeWidth="2" markerEnd="url(#arrowPink)" />
      <g transform="translate(160, 30)" onMouseMove={(e) => onHover("Semantic cache: Store query embeddings + responses. Check similarity before calling LLM. Threshold ~0.95.", e.clientX, e.clientY)} onMouseLeave={() => onHover(null)}><rect width="180" height="140" rx="10" fill="url(#pinkGrad)" opacity="0.9" /><text x="90" y="22" textAnchor="middle" fill="white" fontSize="10" fontWeight="bold">Semantic Cache</text>
        <rect x="10" y="35" width="160" height="45" rx="6" fill="rgba(0,0,0,0.2)" /><text x="90" y="52" textAnchor="middle" fill="white" fontSize="8">Query ‚Üí Embed ‚Üí Search</text><text x="90" y="68" textAnchor="middle" fill="white" fontSize="7">Similar query in cache?</text>
        <rect x="10" y="88" width="75" height="40" rx="4" fill="rgba(74,222,128,0.3)" /><text x="47" y="105" textAnchor="middle" fill="#4ade80" fontSize="7" fontWeight="bold">HIT ‚úì</text><text x="47" y="118" textAnchor="middle" fill="#4ade80" fontSize="6">sim &gt; 0.95</text>
        <rect x="95" y="88" width="75" height="40" rx="4" fill="rgba(251,146,60,0.3)" /><text x="132" y="105" textAnchor="middle" fill="#fb923c" fontSize="7" fontWeight="bold">MISS</text><text x="132" y="118" textAnchor="middle" fill="#fb923c" fontSize="6">call LLM</text>
      </g>
      <path d="M210 175 L210 185 L400 185 L400 130" stroke="#4ade80" strokeWidth="1.5" strokeDasharray="4 2" />
      <path d="M285 175 L285 185 L400 185" stroke="#fb923c" strokeWidth="1.5" strokeDasharray="4 2" />
      <g transform="translate(345, 55)"><rect width="100" height="70" rx="8" fill="url(#purpleGrad)" opacity="0.9" /><text x="50" y="22" textAnchor="middle" fill="white" fontSize="10" fontWeight="bold">LLM</text><text x="50" y="42" textAnchor="middle" fill="white" fontSize="7">Generate if miss</text><text x="50" y="58" textAnchor="middle" fill="white" fontSize="7">Store in cache</text></g>
      <path d="M450 90 L490 90" stroke="#4ade80" strokeWidth="2" markerEnd="url(#arrowGreen)" />
      <g transform="translate(495, 55)"><rect width="120" height="90" rx="8" fill="url(#greenGrad)" opacity="0.9" /><text x="60" y="22" textAnchor="middle" fill="white" fontSize="10" fontWeight="bold">Response</text><text x="60" y="45" textAnchor="middle" fill="white" fontSize="7">From cache: ~5ms</text><text x="60" y="60" textAnchor="middle" fill="white" fontSize="7">From LLM: ~500ms</text><text x="60" y="80" textAnchor="middle" fill="#86efac" fontSize="7" fontWeight="bold">50-90% cache hit</text></g>
      <text x="350" y="195" textAnchor="middle" fill="#f87171" fontSize="9">‚ö†Ô∏è Cache invalidation, Embedding cost, Threshold tuning</text>
    </svg>);

    // Pattern 48: Request Batching
    const BatchingDiagram = ({ onHover }) => (<svg viewBox="0 0 700 200" className="w-full h-auto"><GradientDefs />
      <g transform="translate(30, 30)">
        <rect x="0" y="0" width="120" height="140" rx="8" fill="url(#slateGrad)" opacity="0.5" /><text x="60" y="20" textAnchor="middle" fill="white" fontSize="9" fontWeight="bold">Incoming Requests</text>
        <rect x="10" y="30" width="100" height="25" rx="4" fill="url(#blueGrad)" opacity="0.8" /><text x="60" y="46" textAnchor="middle" fill="white" fontSize="7">Request 1 (t=0)</text>
        <rect x="10" y="60" width="100" height="25" rx="4" fill="url(#blueGrad)" opacity="0.8" /><text x="60" y="76" textAnchor="middle" fill="white" fontSize="7">Request 2 (t=5ms)</text>
        <rect x="10" y="90" width="100" height="25" rx="4" fill="url(#blueGrad)" opacity="0.8" /><text x="60" y="106" textAnchor="middle" fill="white" fontSize="7">Request 3 (t=8ms)</text>
        <rect x="10" y="120" width="100" height="15" rx="4" fill="url(#blueGrad)" opacity="0.5" /><text x="60" y="131" textAnchor="middle" fill="white" fontSize="6">...</text>
      </g>
      <path d="M155 100 L195 100" stroke="#fb923c" strokeWidth="2" markerEnd="url(#arrowOrange)" />
      <g transform="translate(200, 40)" onMouseMove={(e) => onHover("Batching: Collect requests over time window (10-50ms). Combine into single batch. Better GPU utilization.", e.clientX, e.clientY)} onMouseLeave={() => onHover(null)}><rect width="160" height="120" rx="10" fill="url(#orangeGrad)" opacity="0.9" /><text x="80" y="22" textAnchor="middle" fill="white" fontSize="10" fontWeight="bold">Batch Collector</text>
        <rect x="10" y="35" width="140" height="35" rx="4" fill="rgba(0,0,0,0.2)" /><text x="80" y="52" textAnchor="middle" fill="white" fontSize="7">Wait window: 10-50ms</text><text x="80" y="64" textAnchor="middle" fill="white" fontSize="6">OR max_batch_size reached</text>
        <rect x="10" y="78" width="140" height="35" rx="4" fill="rgba(74,222,128,0.2)" /><text x="80" y="95" textAnchor="middle" fill="#4ade80" fontSize="7" fontWeight="bold">Batch: [R1, R2, R3]</text><text x="80" y="107" textAnchor="middle" fill="#4ade80" fontSize="6">Single GPU call</text>
      </g>
      <path d="M365 100 L405 100" stroke="#a78bfa" strokeWidth="2" markerEnd="url(#arrowPurple)" className="flow-line" strokeDasharray="6 3" />
      <g transform="translate(410, 40)" onMouseMove={(e) => onHover("GPU processes batch in parallel. Continuous batching for streaming. vLLM, TGI support this.", e.clientX, e.clientY)} onMouseLeave={() => onHover(null)}><rect width="130" height="120" rx="10" fill="url(#purpleGrad)" opacity="0.9" /><text x="65" y="22" textAnchor="middle" fill="white" fontSize="10" fontWeight="bold">LLM + GPU</text>
        <rect x="10" y="35" width="110" height="35" rx="4" fill="rgba(0,0,0,0.2)" /><text x="65" y="52" textAnchor="middle" fill="white" fontSize="7">Parallel inference</text><text x="65" y="64" textAnchor="middle" fill="white" fontSize="6">Better utilization</text>
        <text x="65" y="90" textAnchor="middle" fill="white" fontSize="7">Continuous batching</text><text x="65" y="105" textAnchor="middle" fill="#c4b5fd" fontSize="6">vLLM, TGI, TensorRT</text>
      </g>
      <path d="M545 100 L585 100" stroke="#4ade80" strokeWidth="2" markerEnd="url(#arrowGreen)" />
      <g transform="translate(590, 50)"><rect width="80" height="100" rx="8" fill="url(#greenGrad)" opacity="0.9" /><text x="40" y="22" textAnchor="middle" fill="white" fontSize="10" fontWeight="bold">Results</text><text x="40" y="45" textAnchor="middle" fill="white" fontSize="7">R1 ‚Üí User1</text><text x="40" y="60" textAnchor="middle" fill="white" fontSize="7">R2 ‚Üí User2</text><text x="40" y="75" textAnchor="middle" fill="white" fontSize="7">R3 ‚Üí User3</text><text x="40" y="92" textAnchor="middle" fill="#86efac" fontSize="6">2-4x throughput</text></g>
      <text x="350" y="185" textAnchor="middle" fill="#f87171" fontSize="9">‚ö†Ô∏è Added latency (wait window), Complex routing, OOM with large batches</text>
    </svg>);

    // Pattern 49: Model Routing
    const ModelRoutingDiagram = ({ onHover }) => (<svg viewBox="0 0 700 220" className="w-full h-auto"><GradientDefs />
      <g transform="translate(30, 85)"><rect width="80" height="60" rx="8" fill="url(#blueGrad)" opacity="0.9" /><text x="40" y="22" textAnchor="middle" fill="white" fontSize="9" fontWeight="bold">Query</text><text x="40" y="40" textAnchor="middle" fill="white" fontSize="7">(any task)</text></g>
      <path d="M115 115 L155 115" stroke="#facc15" strokeWidth="2" markerEnd="url(#arrowYellow)" />
      <g transform="translate(160, 40)" onMouseMove={(e) => onHover("Router classifies query complexity/type. Routes to appropriate model. Save cost on simple tasks.", e.clientX, e.clientY)} onMouseLeave={() => onHover(null)}><rect width="150" height="150" rx="10" fill="url(#yellowGrad)" opacity="0.9" /><text x="75" y="22" textAnchor="middle" fill="white" fontSize="10" fontWeight="bold">Query Router</text><text x="75" y="40" textAnchor="middle" fill="white" fontSize="8">(classifier / heuristics)</text>
        <rect x="10" y="50" width="130" height="28" rx="4" fill="rgba(74,222,128,0.3)" /><text x="75" y="68" textAnchor="middle" fill="#16a34a" fontSize="7" fontWeight="bold">Simple ‚Üí Small Model</text>
        <rect x="10" y="83" width="130" height="28" rx="4" fill="rgba(251,146,60,0.3)" /><text x="75" y="101" textAnchor="middle" fill="#ea580c" fontSize="7" fontWeight="bold">Medium ‚Üí Mid Model</text>
        <rect x="10" y="116" width="130" height="28" rx="4" fill="rgba(167,139,250,0.3)" /><text x="75" y="134" textAnchor="middle" fill="#7c3aed" fontSize="7" fontWeight="bold">Complex ‚Üí Large Model</text>
      </g>
      <path d="M315 65 L355 65" stroke="#4ade80" strokeWidth="1.5" /><path d="M315 115 L355 115" stroke="#fb923c" strokeWidth="1.5" /><path d="M315 165 L355 165" stroke="#a78bfa" strokeWidth="1.5" />
      <g transform="translate(360, 35)"><rect width="120" height="60" rx="8" fill="url(#greenGrad)" opacity="0.9" /><text x="60" y="20" textAnchor="middle" fill="white" fontSize="9" fontWeight="bold">Haiku / GPT-4o-mini</text><text x="60" y="38" textAnchor="middle" fill="white" fontSize="7">Fast, cheap</text><text x="60" y="52" textAnchor="middle" fill="#86efac" fontSize="6">$0.25/M tokens</text></g>
      <g transform="translate(360, 100)"><rect width="120" height="60" rx="8" fill="url(#orangeGrad)" opacity="0.9" /><text x="60" y="20" textAnchor="middle" fill="white" fontSize="9" fontWeight="bold">Sonnet / GPT-4o</text><text x="60" y="38" textAnchor="middle" fill="white" fontSize="7">Balanced</text><text x="60" y="52" textAnchor="middle" fill="#fed7aa" fontSize="6">$3/M tokens</text></g>
      <g transform="translate(360, 165)"><rect width="120" height="60" rx="8" fill="url(#purpleGrad)" opacity="0.9" /><text x="60" y="20" textAnchor="middle" fill="white" fontSize="9" fontWeight="bold">Opus / o1</text><text x="60" y="38" textAnchor="middle" fill="white" fontSize="7">Most capable</text><text x="60" y="52" textAnchor="middle" fill="#c4b5fd" fontSize="6">$15-60/M tokens</text></g>
      <path d="M485 65 L525 100" stroke="#4ade80" strokeWidth="1.5" /><path d="M485 130 L525 115" stroke="#fb923c" strokeWidth="1.5" /><path d="M485 195 L525 130" stroke="#a78bfa" strokeWidth="1.5" />
      <g transform="translate(530, 75)"><rect width="110" height="80" rx="8" fill="url(#cyanGrad)" opacity="0.9" /><text x="55" y="22" textAnchor="middle" fill="white" fontSize="10" fontWeight="bold">Result</text><text x="55" y="45" textAnchor="middle" fill="white" fontSize="7">Right model</text><text x="55" y="60" textAnchor="middle" fill="white" fontSize="7">for the task</text><text x="55" y="75" textAnchor="middle" fill="#cffafe" fontSize="6">50-80% cost savings</text></g>
      <text x="350" y="240" textAnchor="middle" fill="#f87171" fontSize="9">‚ö†Ô∏è Router accuracy, Misclassification cost, Routing latency</text>
    </svg>);

    // Pattern 50: Fallback & Retry
    const FallbackDiagram = ({ onHover }) => (<svg viewBox="0 0 700 200" className="w-full h-auto"><GradientDefs />
      <g transform="translate(30, 75)"><rect width="80" height="50" rx="8" fill="url(#blueGrad)" opacity="0.9" /><text x="40" y="22" textAnchor="middle" fill="white" fontSize="9" fontWeight="bold">Request</text></g>
      <path d="M115 100 L155 100" stroke="#a78bfa" strokeWidth="2" markerEnd="url(#arrowPurple)" />
      <g transform="translate(160, 45)" onMouseMove={(e) => onHover("Primary model: Try first. If fails (rate limit, timeout, error), fall back to secondary.", e.clientX, e.clientY)} onMouseLeave={() => onHover(null)}><rect width="130" height="110" rx="10" fill="url(#purpleGrad)" opacity="0.9" /><text x="65" y="22" textAnchor="middle" fill="white" fontSize="10" fontWeight="bold">Primary Model</text><text x="65" y="40" textAnchor="middle" fill="white" fontSize="8">GPT-4 / Claude</text>
        <rect x="10" y="50" width="110" height="50" rx="4" fill="rgba(0,0,0,0.2)" /><text x="65" y="68" textAnchor="middle" fill="white" fontSize="7">Try with timeout</text><text x="65" y="82" textAnchor="middle" fill="white" fontSize="7">Retry with backoff</text><text x="65" y="94" textAnchor="middle" fill="#f87171" fontSize="6">If fails 3x ‚Üí fallback</text>
      </g>
      <path d="M295 100 L335 70" stroke="#4ade80" strokeWidth="1.5" /><path d="M295 100 L335 130" stroke="#f87171" strokeWidth="1.5" strokeDasharray="4 2" />
      <g transform="translate(340, 40)"><rect width="90" height="60" rx="6" fill="url(#greenGrad)" opacity="0.9" /><text x="45" y="22" textAnchor="middle" fill="white" fontSize="9" fontWeight="bold">Success ‚úì</text><text x="45" y="40" textAnchor="middle" fill="white" fontSize="7">Return result</text></g>
      <g transform="translate(340, 110)" onMouseMove={(e) => onHover("Fallback chain: Secondary model, then tertiary. Different providers for redundancy.", e.clientX, e.clientY)} onMouseLeave={() => onHover(null)}><rect width="130" height="70" rx="8" fill="url(#orangeGrad)" opacity="0.9" /><text x="65" y="18" textAnchor="middle" fill="white" fontSize="9" fontWeight="bold">Fallback Model</text><text x="65" y="36" textAnchor="middle" fill="white" fontSize="7">Different provider</text><text x="65" y="52" textAnchor="middle" fill="white" fontSize="7">Claude ‚Üí GPT fallback</text><text x="65" y="66" textAnchor="middle" fill="#fed7aa" fontSize="6">or vice versa</text></g>
      <path d="M475 145 L515 145" stroke="#fb923c" strokeWidth="1.5" markerEnd="url(#arrowOrange)" />
      <g transform="translate(520, 35)"><rect width="130" height="140" rx="8" fill="rgba(100,116,139,0.3)" stroke="#64748b" /><text x="65" y="22" textAnchor="middle" fill="white" fontSize="9" fontWeight="bold">Resilience Config</text>
        <text x="10" y="45" fill="#4ade80" fontSize="7">‚úì Timeout: 30s</text>
        <text x="10" y="62" fill="#4ade80" fontSize="7">‚úì Retries: 3 (exp backoff)</text>
        <text x="10" y="79" fill="#4ade80" fontSize="7">‚úì Circuit breaker</text>
        <text x="10" y="96" fill="#facc15" fontSize="7">‚ö° Failover: &lt;100ms</text>
        <text x="10" y="113" fill="#22d3ee" fontSize="7">üìä Health checks</text>
        <text x="10" y="130" fill="#c4b5fd" fontSize="7">üîÑ Auto-recovery</text>
      </g>
      <text x="350" y="195" textAnchor="middle" fill="#f87171" fontSize="9">‚ö†Ô∏è Response inconsistency across providers, Cost of redundancy</text>
    </svg>);

    // Pattern 51: Rate Limiting & Throttling
    const RateLimitingDiagram = ({ onHover }) => (<svg viewBox="0 0 700 200" className="w-full h-auto"><GradientDefs />
      <g transform="translate(30, 30)">
        <rect width="100" height="140" rx="8" fill="url(#slateGrad)" opacity="0.5" /><text x="50" y="20" textAnchor="middle" fill="white" fontSize="9" fontWeight="bold">Traffic</text>
        <g transform="translate(10, 30)"><rect width="80" height="18" rx="3" fill="url(#blueGrad)" opacity="0.8" /><text x="40" y="13" textAnchor="middle" fill="white" fontSize="6">User A: 100 req/s</text></g>
        <g transform="translate(10, 53)"><rect width="80" height="18" rx="3" fill="url(#blueGrad)" opacity="0.8" /><text x="40" y="13" textAnchor="middle" fill="white" fontSize="6">User B: 50 req/s</text></g>
        <g transform="translate(10, 76)"><rect width="80" height="18" rx="3" fill="url(#redGrad)" opacity="0.8" /><text x="40" y="13" textAnchor="middle" fill="white" fontSize="6">User C: 500 req/s üî•</text></g>
        <g transform="translate(10, 99)"><rect width="80" height="18" rx="3" fill="url(#blueGrad)" opacity="0.6" /><text x="40" y="13" textAnchor="middle" fill="white" fontSize="6">User D: 20 req/s</text></g>
      </g>
      <path d="M135 100 L175 100" stroke="#f472b6" strokeWidth="2" markerEnd="url(#arrowPink)" />
      <g transform="translate(180, 25)" onMouseMove={(e) => onHover("Rate limiter: Token bucket, sliding window, or fixed window. Per-user and global limits.", e.clientX, e.clientY)} onMouseLeave={() => onHover(null)}><rect width="170" height="150" rx="10" fill="url(#pinkGrad)" opacity="0.9" /><text x="85" y="22" textAnchor="middle" fill="white" fontSize="10" fontWeight="bold">Rate Limiter</text>
        <rect x="10" y="35" width="150" height="35" rx="4" fill="rgba(0,0,0,0.2)" /><text x="85" y="52" textAnchor="middle" fill="white" fontSize="7" fontWeight="bold">Token Bucket Algorithm</text><text x="85" y="64" textAnchor="middle" fill="white" fontSize="6">Tokens refill over time</text>
        <rect x="10" y="78" width="150" height="60" rx="4" fill="rgba(0,0,0,0.2)" /><text x="85" y="93" textAnchor="middle" fill="white" fontSize="7">Per-user: 60 req/min</text><text x="85" y="107" textAnchor="middle" fill="white" fontSize="7">Per-tier: Basic/Pro/Enterprise</text><text x="85" y="121" textAnchor="middle" fill="white" fontSize="7">Global: 10K req/min total</text><text x="85" y="133" textAnchor="middle" fill="#fce7f3" fontSize="6">429 Too Many Requests</text>
      </g>
      <path d="M355 70 L395 70" stroke="#4ade80" strokeWidth="1.5" /><path d="M355 130 L395 130" stroke="#f87171" strokeWidth="1.5" strokeDasharray="4 2" />
      <g transform="translate(400, 40)"><rect width="110" height="60" rx="6" fill="url(#greenGrad)" opacity="0.9" /><text x="55" y="20" textAnchor="middle" fill="white" fontSize="9" fontWeight="bold">Allowed ‚úì</text><text x="55" y="38" textAnchor="middle" fill="white" fontSize="7">‚Üí Process</text><text x="55" y="52" textAnchor="middle" fill="white" fontSize="7">A, B, D pass</text></g>
      <g transform="translate(400, 110)"><rect width="110" height="60" rx="6" fill="url(#redGrad)" opacity="0.9" /><text x="55" y="20" textAnchor="middle" fill="white" fontSize="9" fontWeight="bold">Throttled ‚úó</text><text x="55" y="38" textAnchor="middle" fill="white" fontSize="7">‚Üí Queue or 429</text><text x="55" y="52" textAnchor="middle" fill="white" fontSize="7">C over limit</text></g>
      <g transform="translate(520, 50)"><rect width="130" height="100" rx="8" fill="rgba(100,116,139,0.3)" stroke="#64748b" /><text x="65" y="20" textAnchor="middle" fill="white" fontSize="9" fontWeight="bold">Strategies</text>
        <text x="10" y="40" fill="#4ade80" fontSize="7">‚úì Queue overflow</text>
        <text x="10" y="55" fill="#22d3ee" fontSize="7">‚úì Priority queues</text>
        <text x="10" y="70" fill="#facc15" fontSize="7">‚úì Graceful degradation</text>
        <text x="10" y="85" fill="#c4b5fd" fontSize="7">‚úì Retry-After header</text>
      </g>
      <text x="350" y="195" textAnchor="middle" fill="#f87171" fontSize="9">‚ö†Ô∏è User experience on throttle, Queue memory, Fair scheduling</text>
    </svg>);

    function App() {
      const [tooltip, setTooltip] = useState({ text: null, x: 0, y: 0 });
      const handleHover = (text, x, y) => { setTooltip(text ? { text, x, y } : { text: null, x: 0, y: 0 }); };

      const patterns = [
        { id: 47, title: 'Semantic Caching', subtitle: 'Cache by query similarity. Embed ‚Üí search ‚Üí return if hit. 50-90% cache hit.', Diagram: SemanticCachingDiagram, badges: ['Embedding Cache', '5ms vs 500ms', 'GPTCache'] },
        { id: 48, title: 'Request Batching', subtitle: 'Collect requests over window. Batch for GPU. 2-4x throughput.', Diagram: BatchingDiagram, badges: ['Continuous Batching', 'vLLM/TGI', 'GPU Utilization'] },
        { id: 49, title: 'Model Routing', subtitle: 'Route by complexity. Small model for simple, large for complex.', Diagram: ModelRoutingDiagram, badges: ['Cost Optimization', '50-80% Savings', 'Haiku/Sonnet/Opus'] },
        { id: 50, title: 'Fallback & Retry', subtitle: 'Primary ‚Üí retry ‚Üí fallback chain. Cross-provider resilience.', Diagram: FallbackDiagram, badges: ['Circuit Breaker', 'Exp Backoff', 'Multi-Provider'] },
        { id: 51, title: 'Rate Limiting & Throttling', subtitle: 'Token bucket per-user/global. Protect from abuse. Fair scheduling.', Diagram: RateLimitingDiagram, badges: ['Token Bucket', 'Per-User Limits', '429 Handling'] },
      ];

      return (
        <div className="min-h-screen text-white relative">
          <div className="fixed inset-0 overflow-hidden pointer-events-none">
            <div className="absolute w-[600px] h-[600px] -top-32 -left-32 bg-pink-500/10 rounded-full blur-3xl pulse-bg" />
            <div className="absolute w-[500px] h-[500px] top-1/3 -right-32 bg-orange-500/10 rounded-full blur-3xl pulse-bg" style={{animationDelay: '1s'}} />
          </div>
          <Tooltip text={tooltip.text} x={tooltip.x} y={tooltip.y} />
          <div className="relative max-w-5xl mx-auto px-6 py-12">
            <header className="text-center mb-16">
              <div className="inline-flex items-center gap-2 px-4 py-2 glass rounded-full mb-6">
                <span className="text-pink-300 font-semibold text-sm tracking-wide">SECTION VIII: INFRASTRUCTURE</span>
              </div>
              <h1 className="text-5xl font-black mb-4 gradient-text">Infrastructure Patterns</h1>
              <p className="text-xl text-slate-400 max-w-2xl mx-auto">Caching, batching, routing, resilience. Production-ready LLM serving.<span className="block mt-2 text-pink-400 text-base">Patterns 47‚Äì51 ‚Ä¢ ‚ú® Hover for details</span></p>
            </header>
            <div className="grid grid-cols-3 gap-4 mb-12">
              <div className="glass rounded-xl p-4 text-center"><div className="text-3xl font-bold text-pink-400">5</div><div className="text-slate-400 text-sm">Infra Patterns</div></div>
              <div className="glass rounded-xl p-4 text-center"><div className="text-3xl font-bold text-orange-400">‚ö°</div><div className="text-slate-400 text-sm">Performance</div></div>
              <div className="glass rounded-xl p-4 text-center"><div className="text-3xl font-bold text-yellow-400">üõ°Ô∏è</div><div className="text-slate-400 text-sm">Resilience</div></div>
            </div>
            <div className="space-y-12">
              {patterns.map((p) => (
                <section key={p.id} className="glass rounded-2xl p-8 hover:border-pink-500/30 transition-colors">
                  <div className="flex items-center gap-3 mb-6">
                    <div className="w-10 h-10 rounded-lg bg-pink-500/20 flex items-center justify-center text-lg font-bold text-pink-400">{p.id}</div>
                    <div><h2 className="text-xl font-bold text-pink-300">{p.title}</h2><p className="text-slate-400 text-sm">{p.subtitle}</p></div>
                  </div>
                  <p.Diagram onHover={handleHover} />
                  <div className="mt-4 flex gap-3 flex-wrap">{p.badges.map(b => <span key={b} className="px-3 py-1 rounded-full bg-pink-500/10 text-pink-400 border border-pink-500/20 text-sm">{b}</span>)}</div>
                </section>
              ))}
            </div>
            <footer className="mt-16 text-center pt-8 border-t border-white/10"><p className="text-slate-500">Part of <span className="text-slate-400">The LLM Symphony</span> ‚Äî Section VIII: Infrastructure</p><p className="text-slate-600 text-sm mt-2">Patterns 47-51 of 55</p></footer>
          </div>
        </div>
      );
    }
    ReactDOM.createRoot(document.getElementById('root')).render(<App />);
  </script>
  <div id="cs2b-copyright-footer" style="position:fixed;bottom:0;left:0;right:0;background:linear-gradient(to right,#0f172a,#1e1b4b);border-top:1px solid #334155;padding:8px 16px;font-family:monospace;font-size:11px;color:#64748b;display:flex;justify-content:space-between;align-items:center;z-index:9999;"><span>¬© 2026 Subramaniyam Pooni</span><span style="color:#8b5cf6;">CS¬≤B Technologies</span><span style="color:#475569;">Enterprise AI Agent Development &amp; LLMOps</span></div>
<div id="cs2b-watermark" style="position:fixed;top:50%;left:50%;transform:translate(-50%,-50%) rotate(-35deg);pointer-events:none;z-index:9998;white-space:nowrap;user-select:none;text-align:center;"><div style="font-size:100px;font-weight:900;font-family:Arial,sans-serif;color:rgba(139,92,246,0.06);">CS¬≤B Technologies</div><div style="font-size:40px;font-weight:700;font-family:Arial,sans-serif;color:rgba(139,92,246,0.05);">¬© Subramaniyam Pooni</div></div>
</body>
</html>
