<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LLM Anti-Patterns ‚Äî What NOT To Do</title>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { background: #030712; min-height: 100vh; font-family: 'Inter', system-ui, sans-serif; }
    ::-webkit-scrollbar { width: 8px; }
    ::-webkit-scrollbar-track { background: #0f172a; }
    ::-webkit-scrollbar-thumb { background: #334155; border-radius: 4px; }
    @keyframes pulse { 0%, 100% { opacity: 0.4; } 50% { opacity: 0.8; } }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-5px); } 75% { transform: translateX(5px); } }
    .pulse-bg { animation: pulse 3s ease-in-out infinite; }
    .gradient-text { background: linear-gradient(135deg, #f87171, #fb923c, #fbbf24); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
    .glass { background: rgba(15, 23, 42, 0.6); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.1); }
    .tooltip { position: fixed; z-index: 100; padding: 12px 16px; background: rgba(15, 23, 42, 0.95); border: 1px solid rgba(248, 113, 113, 0.5); border-radius: 12px; font-size: 13px; color: #e2e8f0; max-width: 320px; pointer-events: none; animation: fadeIn 0.2s ease-out; }
    .danger-card { border-left: 4px solid #f87171; }
    .warning-card { border-left: 4px solid #fbbf24; }
  </style>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState } = React;
    const Tooltip = ({ text, x, y }) => { if (!text) return null; return <div className="tooltip" style={{ left: Math.min(x, window.innerWidth - 340), top: y + 15 }}>{text}</div>; };

    const AntiPatternCard = ({ id, title, problem, consequence, solution, severity }) => (
      <div className={`glass rounded-xl p-6 ${severity === 'critical' ? 'danger-card' : 'warning-card'} hover:border-red-500/30 transition-colors`}>
        <div className="flex items-start gap-4">
          <div className={`w-12 h-12 rounded-lg flex items-center justify-center text-2xl ${severity === 'critical' ? 'bg-red-500/20' : 'bg-yellow-500/20'}`}>
            {severity === 'critical' ? 'üö´' : '‚ö†Ô∏è'}
          </div>
          <div className="flex-1">
            <div className="flex items-center gap-2 mb-2">
              <span className={`px-2 py-0.5 rounded text-xs font-bold ${severity === 'critical' ? 'bg-red-500/20 text-red-400' : 'bg-yellow-500/20 text-yellow-400'}`}>
                {severity === 'critical' ? 'CRITICAL' : 'WARNING'}
              </span>
              <span className="text-slate-500 text-sm">Anti-Pattern #{id}</span>
            </div>
            <h3 className={`text-xl font-bold mb-3 ${severity === 'critical' ? 'text-red-400' : 'text-yellow-400'}`}>{title}</h3>
            
            <div className="space-y-3">
              <div className="bg-red-500/10 rounded-lg p-3">
                <div className="text-red-400 text-xs font-bold mb-1">‚ùå THE PROBLEM</div>
                <p className="text-slate-300 text-sm">{problem}</p>
              </div>
              
              <div className="bg-orange-500/10 rounded-lg p-3">
                <div className="text-orange-400 text-xs font-bold mb-1">üí• CONSEQUENCE</div>
                <p className="text-slate-300 text-sm">{consequence}</p>
              </div>
              
              <div className="bg-green-500/10 rounded-lg p-3">
                <div className="text-green-400 text-xs font-bold mb-1">‚úÖ THE FIX</div>
                <p className="text-slate-300 text-sm">{solution}</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    );

    function App() {
      const antiPatterns = [
        // Critical Anti-Patterns
        {
          id: 1,
          title: "Ignoring Token Limits",
          problem: "Stuffing too much context into prompts without tracking token count. Assuming 'more context = better'.",
          consequence: "Silent truncation, lost information, incomplete responses, unexpected costs. Model sees partial context and hallucinates.",
          solution: "Always count tokens (tiktoken). Implement chunking strategies. Use summarization for long documents. Monitor context window usage.",
          severity: "critical"
        },
        {
          id: 2,
          title: "No Prompt Versioning",
          problem: "Editing prompts directly in code without version control. No history of what changed when.",
          consequence: "Cannot rollback when new prompt breaks. No A/B testing capability. Debugging nightmares. 'It worked yesterday' syndrome.",
          solution: "Treat prompts as code. Use prompt registries (PromptLayer, Humanloop). Version control with git. Track metrics per version.",
          severity: "critical"
        },
        {
          id: 3,
          title: "Trusting LLM Output Blindly",
          problem: "No validation of structured outputs. Assuming LLM always follows format instructions. No error handling.",
          consequence: "JSON parse errors crash production. Invalid data propagates through system. Security vulnerabilities from malformed output.",
          solution: "Always validate with Pydantic/Zod. Use constrained generation (JSON schema). Implement retry with correction. Graceful degradation.",
          severity: "critical"
        },
        {
          id: 4,
          title: "Exposing Raw User Input to LLM",
          problem: "Directly concatenating user input into prompts without sanitization. No prompt injection protection.",
          consequence: "Prompt injection attacks succeed. Data exfiltration. Jailbreaks. Users can override system instructions.",
          solution: "Sanitize all user input. Use input guardrails (Lakera, NeMo). Separate user content from instructions. Red team your prompts.",
          severity: "critical"
        },
        {
          id: 5,
          title: "No Cost Monitoring",
          problem: "Running LLM calls without tracking token usage and costs. Unlimited API access for users.",
          consequence: "$10K+ surprise bills. Single user can drain budget. No visibility into cost drivers. Cannot optimize.",
          solution: "Implement per-request cost tracking. Set budget alerts. Rate limit by user/tier. Use model routing (small model for simple tasks).",
          severity: "critical"
        },
        {
          id: 6,
          title: "Synchronous-Only Architecture",
          problem: "All LLM calls blocking the main thread. No async, no queuing, no streaming for long operations.",
          consequence: "Terrible UX (users wait 30s+ with no feedback). Timeouts. Resource exhaustion under load. Cannot scale.",
          solution: "Implement streaming for all user-facing calls. Use async/await. Queue long-running tasks. Show progress indicators.",
          severity: "critical"
        },
        // Warning Anti-Patterns
        {
          id: 7,
          title: "One Model Fits All",
          problem: "Using GPT-4/Claude Opus for everything including simple tasks like classification or formatting.",
          consequence: "10-100x higher costs than necessary. Slower responses. Resource waste. Competitive disadvantage.",
          solution: "Implement model routing. Use Haiku/GPT-4-mini for simple tasks. Reserve powerful models for complex reasoning.",
          severity: "warning"
        },
        {
          id: 8,
          title: "No Evaluation Framework",
          problem: "Deploying prompt changes without systematic testing. Vibes-based quality assessment.",
          consequence: "Regressions go unnoticed. Quality degrades over time. Cannot measure improvement. Customer complaints.",
          solution: "Build golden evaluation datasets. Implement LLM-as-judge. Run evals in CI/CD. Track metrics over time.",
          severity: "warning"
        },
        {
          id: 9,
          title: "Ignoring Latency P95/P99",
          problem: "Only looking at average latency. Not monitoring tail latencies or timeout rates.",
          consequence: "5-10% of users have terrible experience. Cascading failures during slowdowns. SLA breaches.",
          solution: "Monitor P50/P95/P99 latencies. Set timeouts with fallbacks. Implement circuit breakers. Cache common queries.",
          severity: "warning"
        },
        {
          id: 10,
          title: "RAG Without Reranking",
          problem: "Using raw vector similarity scores as final ranking. Assuming top-k embeddings are always best.",
          consequence: "20-30% worse retrieval quality. Irrelevant documents in context. Hallucinations from poor context.",
          solution: "Add cross-encoder reranking (Cohere, BGE-reranker). Use hybrid search (dense + sparse). Evaluate retrieval quality.",
          severity: "warning"
        },
        {
          id: 11,
          title: "Fixed Chunk Sizes for Everything",
          problem: "Using same chunking strategy (e.g., 512 tokens) for all document types regardless of structure.",
          consequence: "Code split mid-function. Tables broken apart. Context lost at boundaries. Poor retrieval.",
          solution: "Use semantic chunking. Respect document structure (headers, code blocks). Implement overlap. Consider hierarchical chunking.",
          severity: "warning"
        },
        {
          id: 12,
          title: "No Fallback Strategy",
          problem: "Single provider dependency. No retry logic. No graceful degradation.",
          consequence: "Complete outage when provider has issues. Poor reliability. Angry users during incidents.",
          solution: "Multi-provider setup (OpenAI + Anthropic). Exponential backoff retries. Cached fallback responses. Graceful degradation.",
          severity: "warning"
        },
        {
          id: 13,
          title: "Logging Sensitive Data",
          problem: "Logging full prompts and responses including PII, credentials, or confidential business data.",
          consequence: "Compliance violations (GDPR, HIPAA). Security breaches. Legal liability. Customer trust destroyed.",
          solution: "Implement PII detection and redaction. Log metadata not content. Separate sensitive logs. Audit access.",
          severity: "critical"
        },
        {
          id: 14,
          title: "Infinite Agent Loops",
          problem: "Agentic systems without loop detection or iteration limits. No timeout on multi-step reasoning.",
          consequence: "Runaway costs ($100+ per query). Stuck requests. Resource exhaustion. User frustration.",
          solution: "Set max iterations (5-10). Implement timeout. Track loop detection. Add human-in-loop for complex cases.",
          severity: "critical"
        },
        {
          id: 15,
          title: "Embedding Model Mismatch",
          problem: "Using different embedding models for indexing vs querying. Or switching models without reindexing.",
          consequence: "Terrible retrieval quality. Semantic mismatch. Silently broken RAG. Mysterious accuracy drops.",
          solution: "Use SAME model for index and query. Reindex when changing models. Track model versions in metadata.",
          severity: "warning"
        },
        {
          id: 16,
          title: "No Observability",
          problem: "Flying blind with no traces, metrics, or logging. Cannot debug issues or understand behavior.",
          consequence: "Issues discovered by users. Root cause analysis impossible. Cannot optimize. Technical debt grows.",
          solution: "Implement tracing (Langfuse, LangSmith). Log all LLM calls. Track latency, tokens, costs. Build dashboards.",
          severity: "warning"
        }
      ];

      return (
        <div className="min-h-screen text-white relative">
          <div className="fixed inset-0 overflow-hidden pointer-events-none">
            <div className="absolute w-[600px] h-[600px] -top-32 -left-32 bg-red-500/10 rounded-full blur-3xl pulse-bg" />
            <div className="absolute w-[500px] h-[500px] top-1/3 -right-32 bg-orange-500/10 rounded-full blur-3xl pulse-bg" style={{animationDelay: '1s'}} />
            <div className="absolute w-[400px] h-[400px] bottom-0 left-1/3 bg-yellow-500/10 rounded-full blur-3xl pulse-bg" style={{animationDelay: '2s'}} />
          </div>
          
          <div className="relative max-w-5xl mx-auto px-6 py-12">
            <header className="text-center mb-16">
              <div className="inline-flex items-center gap-2 px-4 py-2 glass rounded-full mb-6 border border-red-500/30">
                <span className="text-red-300 font-semibold text-sm tracking-wide">‚ö†Ô∏è ANTI-PATTERNS</span>
              </div>
              <h1 className="text-5xl font-black mb-4 gradient-text">What NOT To Do</h1>
              <p className="text-xl text-slate-400 max-w-2xl mx-auto">
                Common LLM mistakes that will hurt you in production. Learn from others' failures.
                <span className="block mt-2 text-red-400 text-base">16 Anti-Patterns ‚Ä¢ üö´ Avoid these at all costs</span>
              </p>
            </header>

            <div className="grid grid-cols-2 gap-4 mb-12">
              <div className="glass rounded-xl p-4 text-center border border-red-500/30">
                <div className="text-3xl font-bold text-red-400">8</div>
                <div className="text-slate-400 text-sm">Critical Issues</div>
              </div>
              <div className="glass rounded-xl p-4 text-center border border-yellow-500/30">
                <div className="text-3xl font-bold text-yellow-400">8</div>
                <div className="text-slate-400 text-sm">Warnings</div>
              </div>
            </div>

            <div className="mb-8">
              <h2 className="text-2xl font-bold text-red-400 mb-6 flex items-center gap-2">
                <span className="text-3xl">üö´</span> Critical Anti-Patterns
              </h2>
              <div className="space-y-6">
                {antiPatterns.filter(p => p.severity === 'critical').map(p => (
                  <AntiPatternCard key={p.id} {...p} />
                ))}
              </div>
            </div>

            <div className="mb-8">
              <h2 className="text-2xl font-bold text-yellow-400 mb-6 flex items-center gap-2">
                <span className="text-3xl">‚ö†Ô∏è</span> Warning Anti-Patterns
              </h2>
              <div className="space-y-6">
                {antiPatterns.filter(p => p.severity === 'warning').map(p => (
                  <AntiPatternCard key={p.id} {...p} />
                ))}
              </div>
            </div>

            <div className="glass rounded-2xl p-8 border border-green-500/30 mb-12">
              <h2 className="text-2xl font-bold text-green-400 mb-4 flex items-center gap-2">
                <span className="text-3xl">‚úÖ</span> Quick Checklist
              </h2>
              <div className="grid grid-cols-2 gap-4">
                <div className="space-y-2">
                  <div className="flex items-center gap-2 text-slate-300">
                    <span className="text-green-400">‚òê</span> Token counting implemented
                  </div>
                  <div className="flex items-center gap-2 text-slate-300">
                    <span className="text-green-400">‚òê</span> Prompt versioning in place
                  </div>
                  <div className="flex items-center gap-2 text-slate-300">
                    <span className="text-green-400">‚òê</span> Output validation enabled
                  </div>
                  <div className="flex items-center gap-2 text-slate-300">
                    <span className="text-green-400">‚òê</span> Input sanitization active
                  </div>
                  <div className="flex items-center gap-2 text-slate-300">
                    <span className="text-green-400">‚òê</span> Cost monitoring setup
                  </div>
                  <div className="flex items-center gap-2 text-slate-300">
                    <span className="text-green-400">‚òê</span> Streaming implemented
                  </div>
                  <div className="flex items-center gap-2 text-slate-300">
                    <span className="text-green-400">‚òê</span> Model routing configured
                  </div>
                  <div className="flex items-center gap-2 text-slate-300">
                    <span className="text-green-400">‚òê</span> Evaluation framework ready
                  </div>
                </div>
                <div className="space-y-2">
                  <div className="flex items-center gap-2 text-slate-300">
                    <span className="text-green-400">‚òê</span> P95/P99 latency tracked
                  </div>
                  <div className="flex items-center gap-2 text-slate-300">
                    <span className="text-green-400">‚òê</span> Reranking enabled for RAG
                  </div>
                  <div className="flex items-center gap-2 text-slate-300">
                    <span className="text-green-400">‚òê</span> Smart chunking strategy
                  </div>
                  <div className="flex items-center gap-2 text-slate-300">
                    <span className="text-green-400">‚òê</span> Fallback providers configured
                  </div>
                  <div className="flex items-center gap-2 text-slate-300">
                    <span className="text-green-400">‚òê</span> PII redaction in logs
                  </div>
                  <div className="flex items-center gap-2 text-slate-300">
                    <span className="text-green-400">‚òê</span> Agent loop limits set
                  </div>
                  <div className="flex items-center gap-2 text-slate-300">
                    <span className="text-green-400">‚òê</span> Embedding model consistency
                  </div>
                  <div className="flex items-center gap-2 text-slate-300">
                    <span className="text-green-400">‚òê</span> Full observability stack
                  </div>
                </div>
              </div>
            </div>

            <footer className="mt-16 text-center pt-8 border-t border-white/10">
              <p className="text-slate-500">Part of <span className="text-slate-400">The LLM Symphony</span> ‚Äî Anti-Patterns Section</p>
              <p className="text-slate-600 text-sm mt-2">Learn from others' mistakes. Don't repeat them.</p>
            </footer>
          </div>
        </div>
      );
    }
    ReactDOM.createRoot(document.getElementById('root')).render(<App />);
  </script>
</body>
</html>
