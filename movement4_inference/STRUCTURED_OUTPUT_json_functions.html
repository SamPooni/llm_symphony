<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Structured Output - JSON, Functions, Constrained</title>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body style="margin:0;background:#000">
  <div id="root"></div>
  <script type="text/babel">
    function App() {
      const [hover, setHover] = React.useState(null);
      
      const tips = {
        'why': 'LLMs output text. Apps need structured data. JSON, not prose. Structured output bridges the gap. Machine-readable responses.',
        'json': 'JSON mode. Model outputs valid JSON. response_format: {type: "json_object"}. OpenAI, Anthropic support. Must ask for JSON in prompt too.',
        'schema': 'JSON Schema enforcement. Define exact structure. Required fields, types, enums. Model follows schema. Guaranteed structure.',
        'func': 'Function calling. Define functions with schemas. Model decides when to call, outputs structured args. Tool use foundation.',
        'tool': 'Tool use. Functions that model can invoke. Retrieve data, take actions, access APIs. Agent capability. Schema-validated.',
        'pydantic': 'Pydantic models define output structure. Type validation, field constraints. instructor library bridges LLM to Pydantic. Python-native.',
        'instructor': 'Library for structured LLM outputs. Wraps OpenAI/Anthropic. Returns Pydantic objects. Retries on validation failure. Production-ready.',
        'outlines': 'Constrained generation library. Grammar-based decoding. Only valid tokens allowed. Guaranteed valid output. Open source.',
        'guidance': 'Microsoft library. Interleave text and structure. Templates with typed holes. Constrained generation. Flexible patterns.',
        'constrain': 'Constrained decoding. Modify token probabilities. Only allow tokens that continue valid structure. Logit bias technique.',
        'grammar': 'Define grammar (BNF/regex). Only generate strings matching grammar. Perfect for code, DSLs, structured formats.',
        'retry': 'Parse output, validate, retry if invalid. Simple but works. Instructor does this automatically. Waste some tokens.',
        'extract': 'Extract entities from text. Names, dates, amounts. Structured extraction task. Form filling, data entry.',
        'classify': 'Classification as structured output. {"category": "spam", "confidence": 0.95}. Typed classification results.'
      };

      const Card = ({id, bg, title, sub}) => (
        <div 
          className={`p-4 rounded-xl border-2 ${bg} cursor-pointer hover:scale-105 transition-transform relative`}
          onMouseEnter={() => setHover(id)}
          onMouseLeave={() => setHover(null)}
        >
          <div className="font-bold">{title}</div>
          <div className="text-sm opacity-60">{sub}</div>
          {hover === id && (
            <div className="absolute left-0 top-full mt-2 z-50 w-72 p-3 bg-slate-800 border border-cyan-500 rounded-lg text-sm text-white shadow-xl">
              {tips[id]}
            </div>
          )}
        </div>
      );

      return (
        <div className="min-h-screen bg-black text-white p-8">
          <div className="max-w-5xl mx-auto">
            <div className="text-center mb-8">
              <div className="inline-block px-4 py-1 bg-yellow-900/50 border border-yellow-500 rounded-full mb-4">
                <span className="text-yellow-300 font-bold text-sm">OUTPUT FORMAT</span>
              </div>
              <h1 className="text-4xl font-black mb-2 text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-amber-500">
                Structured Output
              </h1>
              <p className="text-slate-400">JSON, function calling, constrained decoding. Hover for details.</p>
            </div>

            {/* Why */}
            <div className="mb-8">
              <h2 className="text-lg font-bold mb-3 text-yellow-300">1. Basics</h2>
              <div className="grid grid-cols-3 gap-3">
                <Card id="why" bg="bg-yellow-900/50 border-yellow-500 text-yellow-200" title="Why Structured?" sub="Apps need data, not prose"/>
                <Card id="json" bg="bg-yellow-900/50 border-yellow-500 text-yellow-200" title="JSON Mode" sub="Valid JSON output"/>
                <Card id="schema" bg="bg-yellow-900/50 border-yellow-500 text-yellow-200" title="Schema" sub="Exact structure enforced"/>
              </div>
            </div>

            {/* Function Calling */}
            <div className="mb-8">
              <h2 className="text-lg font-bold mb-3 text-blue-300">2. Function Calling</h2>
              <div className="grid grid-cols-2 gap-3">
                <Card id="func" bg="bg-blue-900/50 border-blue-500 text-blue-200" title="Functions" sub="Define callable functions"/>
                <Card id="tool" bg="bg-blue-900/50 border-blue-500 text-blue-200" title="Tool Use" sub="Agent capabilities"/>
              </div>
            </div>

            {/* Libraries */}
            <div className="mb-8">
              <h2 className="text-lg font-bold mb-3 text-green-300">3. Libraries</h2>
              <div className="grid grid-cols-4 gap-3">
                <Card id="pydantic" bg="bg-green-900/50 border-green-500 text-green-200" title="Pydantic" sub="Python type models"/>
                <Card id="instructor" bg="bg-green-900/50 border-green-500 text-green-200" title="Instructor" sub="LLM to Pydantic"/>
                <Card id="outlines" bg="bg-green-900/50 border-green-500 text-green-200" title="Outlines" sub="Grammar decoding"/>
                <Card id="guidance" bg="bg-green-900/50 border-green-500 text-green-200" title="Guidance" sub="Microsoft templates"/>
              </div>
            </div>

            {/* Techniques */}
            <div className="mb-8">
              <h2 className="text-lg font-bold mb-3 text-purple-300">4. Techniques</h2>
              <div className="grid grid-cols-3 gap-3">
                <Card id="constrain" bg="bg-purple-900/50 border-purple-500 text-purple-200" title="Constrained" sub="Logit manipulation"/>
                <Card id="grammar" bg="bg-purple-900/50 border-purple-500 text-purple-200" title="Grammar" sub="BNF/regex rules"/>
                <Card id="retry" bg="bg-purple-900/50 border-purple-500 text-purple-200" title="Retry" sub="Validate and retry"/>
              </div>
            </div>

            {/* Use Cases */}
            <div className="mb-8">
              <h2 className="text-lg font-bold mb-3 text-orange-300">5. Use Cases</h2>
              <div className="grid grid-cols-2 gap-3">
                <Card id="extract" bg="bg-orange-900/50 border-orange-500 text-orange-200" title="Extraction" sub="Entities from text"/>
                <Card id="classify" bg="bg-orange-900/50 border-orange-500 text-orange-200" title="Classification" sub="Typed categories"/>
              </div>
            </div>

            {/* Summary */}
            <div className="bg-slate-900/50 border border-yellow-500/30 rounded-xl p-6 text-center">
              <div className="text-xl font-bold text-white mb-2">Structured Output Summary</div>
              <p className="text-slate-400 text-sm mb-4">
                JSON mode for simple, schema for strict, function calling for tools. Instructor for Python.
              </p>
              <div className="flex justify-center gap-3 flex-wrap">
                <span className="px-3 py-1 bg-yellow-900/50 rounded text-yellow-300 text-sm">JSON Schema</span>
                <span className="px-3 py-1 bg-blue-900/50 rounded text-blue-300 text-sm">Functions</span>
                <span className="px-3 py-1 bg-green-900/50 rounded text-green-300 text-sm">Instructor</span>
                <span className="px-3 py-1 bg-purple-900/50 rounded text-purple-300 text-sm">Outlines</span>
              </div>
            </div>
          </div>
        </div>
      );
    }
    ReactDOM.createRoot(document.getElementById('root')).render(<App />);
  </script>
</body>
</html>
